---
import { getCollection, type CollectionEntry } from 'astro:content';
import EventLayout from '../../layouts/EventLayout.astro';

export async function getStaticPaths() {
  const events = await getCollection('events');
  return events.map((event) => ({
    params: { slug: event.slug },
    props: { event },
  }));
}

type Props = {
  event: CollectionEntry<'events'>;
};

const { event } = Astro.props;
const { Content } = await event.render();
---

<EventLayout
  title={event.data.title}
  description={event.data.description}
  date={event.data.date}
  endDate={event.data.endDate}
  location={event.data.location}
  coverImage={event.data.coverImage}
  tags={event.data.tags}
  organizers={event.data.organizers}
  registrationLink={event.data.registrationLink}
>
  <Content />
</EventLayout>